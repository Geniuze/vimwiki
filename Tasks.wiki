= 2021.1.4 周一 =

* Bug 184806 - [GWN Cloud_bridge]wep encryption, link shows bridge is successful,but network is blocked
    * 环境搭建及测试
    * 7660桥接7600/7630lr，可桥接上，只有wep时桥接上，网络不通，此时接上7660网线，修改加密方式，下发配置后拔掉网线，可以桥接上，并网络也通
    * 7600/7630lr桥接7600时，可桥接上，只有wep时桥接上，网络不通
* hs20测试
    * 申请网卡测试
* WPA3联盟认证
    * WPA3-192 radius tls加密缺少类型
        * RADIUS_ATTR_WLAN_PAIRWISE_CIPHER = 186,
        * RADIUS_ATTR_WLAN_GROUP_CIPHER = 187,
        * RADIUS_ATTR_WLAN_AKM_SUITE = 188,
        * RADIUS_ATTR_WLAN_GROUP_MGMT_CIPHER = 189,
* 测试沟通
    * wpa_supplicant 使用eap-tls无法连接
        * 证书问题
    * 8021x认证不通过
        * 8021xd进程异常退出，已有问题单
= 2021.1.5 周二 =
* WPA3联盟认证
    * WPA3-192 radius tls加密缺少类型
        * RADIUS_ATTR_WLAN_PAIRWISE_CIPHER = 186,
        * RADIUS_ATTR_WLAN_GROUP_CIPHER = 187,
        * RADIUS_ATTR_WLAN_AKM_SUITE = 188,
        * RADIUS_ATTR_WLAN_GROUP_MGMT_CIPHER = 189,
        * https://192.168.120.245/#/c/211914/1
    * WPA3加密校验
        * 4.6.1
        * 修改wpa_supplicant使之发送错误包，以确认校验有效性
        * https://192.168.120.245/#/c/211914/1
    * Radius REJECT 消息携带185
        * 添加185属性解析，并将reason下发到驱动并放到deauth中
        * https://192.168.120.245/#/c/212013/
= 2021.1.6 周三 =
* WPA3联盟认证
    * radius认证 ipv6支持
        * https://192.168.120.245/#/c/212075/
    * Bug 185068 - [GWN Cloud_rrm]No neighborhood AP is detected, wireless power is adjusted to a maximum of 30dBm, channel adjustment is consistent or close
        * 添加针对7000的管理不启用RRM功能后云端管理也无法启用RRM功能
        * config_version配置项云端并没有
= 2021.1.7 周四 =
* Bug 185214 - [GWN7615_WPA3]WPA encryption type is configured as GCMP-128 or CCMP-256,does not take effect
    * gsconfig uci2dat gscheckwifi中MTK未添加GCMP128和CCMP256的支持
* Bug 184880 - [GWN7615_SSIDs]In the SSID, security mode is WPA2/WPA3, WPA key mode is 802.1x, AKMP Suite OUI value is missing 00-of-AC-05
    * 分析协议，些AKM为11w协议添加，当11w为required时，强制使用sha256
    * 而wpa2/wpa3安全模式下时，11w强制为optional，则可以不携带
* Bug 179279 - [GWN7600 HS20][HZ] the osu client couldn't associate to the osen ssid on GWN7600
    * 问题还可以复现 未去定位
* 会议 2hours
* Bug 182914 - [GWN7660 mesh]Sometimes captive portal can't take effect on re ap's 5G ssid.
    * 问题已复现
    * 尝试注释部分account中的代码，以定位问题
= 2021.1.8 周五 =
* Bug 182914 - [GWN7660 mesh]Sometimes captive portal can't take effect on re ap's 5G ssid.
    * 定位为在ubus event回调函数中调用ubus_lookup_id引起envent事件乱序
    * 更换为system系统调用，问题消失
    * 测试时出现重启设备后，mesh无法正常连接
* 周会 1小时
* Bug 183183 - [GWN7660_RRM]DCA adjusts the channel to the DFS channel 
    * GWN7615 100信道可以正常使用，允许切换
* DFS信道添加开关，禁止页面，及驱动和DCA启用DFS信道
    * 代码分析
* Bug 182430 - [GWN7660 mesh]Sometimes mesh topology displayed incorrect on master.
    * 未开始

= 2021.1.11 周一 =
* DFS信道添加开关，禁止页面，及驱动和DCA启用DFS信道
    * 代码分析
* GWN7660 关闭2Gmesh
    * https://192.168.120.245/#/c/212476/
* Bug 185350 - [GWN7605_WPA3]Secure encryption mode in SSID is WPA2/WPA3-(SAE-PSK)-AES or WPA3-SAE-AES, which cannot be bridged successfully、
    * 搭环境调试功能
    * 分析代码发现为APCLI的SAE并未合入
    * 下载新版本的MT7621的驱动，对比代码
= 2021.1.12 周二 =
* Bug 185350 - [GWN7605_WPA3]Secure encryption mode in SSID is WPA2/WPA3-(SAE-PSK)-AES or WPA3-SAE-AES, which cannot be bridged successfully、
    * 搭环境调试功能
    * 分析代码发现为APCLI的SAE并未合入
    * 下载新版本的MT7621的驱动，对比代码
* gwn7660 hs20
    * 搭环境测试，功能生效，icon显示不正确
    * 修改并上库

= 2021.1.13 周三 =
* WPA3联盟认证
    * PMF下发送错误加密的Deauth帧，客户端会被T下线
        * 尝试修改驱动将主动发送加密Deauth
        * 测试那边后来用原版本测试通过，非问题
    * WPA2 4.2.1 RSNIE填充部分为空
        * 校验问题

= 2021.1.14 周四 =
* WPA3联盟认证
    * SAE anti-clogging 不生效
        * 认证发送太晚，导致原有连接超时。
        * 修改超时时间为30秒
* GWN7605 19.15版本 SSID vlan情况下无法获取IP地址
    * oem交换机问题，本地搭建环境是正常的
    * 测试将AP直接7000后变为正常
* 测试提出 NAT + WPA3-192 + GCMP256 的SSID不广播
    * 备用radius密钥为空引起
* GWN7660 hs20 测试
    * 测试出现无法连接，远程分析
    * 修改hs20的配置后设备SSID无法up
    * 原因是hs20脚本中调用hostap_setup时，参数错误 athores->nl80211
    * https://192.168.120.245/#/c/208849/

= 2021.1.15 周五 =
* Bug 185930 - [GWN7605 ssid][HZ] After disable ssid then enable， the 8021xd process didn't startup
    * GWN7605会默认创建一个2G的SSID
    * 而默认配置中未添加备份RADIUS的配置，DBDC模式会合并配置引起5G RADIUS_server无法正确读取
* 测试出现mesh下行接口无法Up
    * 分析日志应该是在ACS触发后接口被bringdown引起ACS事件未触发，up未处理
    * 本地搭环境尝试复现
    * 添加日志发到测试帮忙复现
* mesh存在连接慢的问题
    * 可能是扫描时未将mesh结果添加到链表头部引起

= 2021.1.18 周一 =
* mesh存在连接慢的问题
    * 可能是扫描时未将mesh结果添加到链表头部引起
    * 驱动修改，发送给测试复现
    * 驱动使用64大小的hash表，无法插入到列表前，尝试在读取时读取两次，优先读取带gs,gsmesh,gsoui_11k的ie的设备，再读取其它设备
    * Bug 185943 - [GWN7660 mesh]REAP's mesh connection failed.
* 周例会 1小时
* Bug 185350 - [GWN7605_WPA3]Secure encryption mode in SSID is WPA2/WPA3-(SAE-PSK)-AES or WPA3-SAE-AES, which cannot be bridged successfully、
    * 从新驱动中将代码合入到原有驱动

= 2021.1.19 周二 =
* Bug 185350 - [GWN7605_WPA3]Secure encryption mode in SSID is WPA2/WPA3-(SAE-PSK)-AES or WPA3-SAE-AES, which cannot be bridged successfully、
    * 合入后，编译测试
    * 存在问题，预添加结点后（旧版本没有此逻辑），收包流程判断wdev状态非ready
* rrm消息合并（未处理）
* rrm邻居master检查（未处理）
    * 在gs_neighbor的ie中，使用rssi和power字段发送masterID,并进行比对后上报

= 2021.1.20 周三 =
* GWN7660 2G 桥接失败
    * iwlist ath0 scan 无结果
    * 使用复位命令：iwpriv wifi0 pdev_reset 1/2/3/4/5 均无效
    * 更换设备后测试正常
* GWN7660 mesh连接GWN7630 - 田波鹏
    * 空口抓包 7660未回应2/4
    * 可能是GWN7660 wpa_supplicant未能正常接收1/4
    * ovs-vsctl list bridge // stp关闭
    * /etc/init.d/hyd stop //hyd关闭
    * ovs-dpctl dump-flows //没有相关dp流产生
    * wpa_supplicant无法正常接收1/4帧
    * ps发现进程存在文件锁为network和lbd脚本产生
* 2.4G被chd调整到19dBm，之后无终端连接，邻居AP中rssi最小的都大于-80dBm，但tpc为未进行调整
    * 日志分析
    * 无问题

= 2021.1.21 周四 =
* Bug 185942 - [GWN Manager_SSID]Security mode for WPA3, support 802.11W wireless terminal cannot successfully roaming
    * 未开始
* Bug 185943 - [GWN7660 mesh]REAP's mesh connection failed.
    * 读取两次，优先读取
* Bug 186334 - [GWN Cloud_ Insight]Scanned AP encryption mode is WPA3 related,display incorrectly
    * 驱动已将rsnie上传到nbrd,只需nbrd解析rsnie即可

= 2021.1.22 周五 =
* Bug 186334 - [GWN Cloud_ Insight]Scanned AP encryption mode is WPA3 related,display incorrectly
    * 完成已上库
* Bug 185942 - [GWN Manager_SSID]Security mode for WPA3, support 802.11W wireless terminal cannot successfully roaming
    * WPA3开启时已禁用11r功能
    * WPA3/8021x认证时支持开启11r
    * web修改开启企业语音功能后，无法立即生效，分析代码后发现应该会立即生效
    * 添加日志后问题消失，换回原来的mt_wifi.ko也消失
    * 未再复现
        * 怀疑点：
            - 小CPU未处理更新beacon操作
            - gsconfig未更新wireless配置文件
* 周会 0.5小时
* Bug 184029 - [GWN Cloud_SSIDs]Encryption mode is WPA3-SAE, the password is 64 hexadecimal characters, the terminal cannot be associated
    * ssid可以正常UP
    * 使用苹果手机连接时不会发出auth帧
    * WPA3 sae不支持配置64个hex字符的密钥，只可以配置63位的ascii码
    * 页面可以对应做下限制
    * hostapd中使用变量不同
        * wpa_psk // 64位hex
        * wpa_passphrase //8~63位的共享密钥

= 2021.1.25 周一 =
* Bug 186681 - [GWN Cloud_RRM]Manufacturing GWN7600LR 2.4g and 5G busy, SAMPLE_CNT value is always 0
    * 分析日志
    * 日志为MTK平台的日志，与问题单描述不符，谢湖休假
* Bug 186399 - [GWN7660 Mesh]CAP cannot receive RE2's DB DESC packet properly
    * 未复现
    * 测试复现， 上行RE AP换来换去，然后重启2个RE
    * mesh0接口未up
    * lbd: telnet 127.0.0.1:7787 > dbg here
* GWN7630出现获取不到ip地址的问题 - 周西平
    * 抓不到AP的dhcp报文
    * 连接的Client可以正常访问网络
    * POE口PORT2
    * 更换网线问题消失
* rrm邻居master检查
* hotspot ssid无法正常连接
    * radius报文端口不正确，配置为18120端口，实际发送为1812端口
    * MTK驱动读取RADIUS_Port时，是根据RADIUS_Server的个数读取，如果备份为0，则只会读取1个端口，备份端口被下一个SSID读取
    * Interworking no match no network // 报错
    * 搭环境复现
    * 因为备份radius的问题，非正常radius端口认证会有问题
    * 徐皓处理
= 2021.1.26 周二 =
* Bug 186874 - [GWN7660_11k] No other AP info in the AP neighbor report

* Bug 186322 - [GWN7660 mesh]Sometimes reap didn't broadcast mesh interface.
    * 添加日志后尝试复现
= 2021.1.27 周三 =
* Bug 186322 - [GWN7660 mesh]Sometimes reap didn't broadcast mesh interface.
    * 尝试不停切换上行CAP进行复现
    * 栈信息: 设置信道时会down掉所有的ssid,但是mesh0接口acs正在处理，down掉后无法正常up
    * 问题原因：当mesh0接口添加ACS扫描时，acs_in_progress为true,但实际上ACS已经执行post_events并返回，acs_in_progress值未及时修改
    * 偶现原因：正常情况下会在ath1接口的ACS回调之前加入mesh0接口的ACS，此时会两个接口同时返回完成事件，出问题时ath1的ACS已经返回，但是mesh0添加时判断状态为未返回
[   68.988304] CPU: 3 PID: 2258 Comm: hostapd Tainted: P                4.4.60 #1
[   68.998016] Hardware name: Qualcomm Technologies, Inc. IPQ6018/AP-CP03-C1 (DT)
[   69.005307] Call trace:
[   69.012513] [<ffffffc0000890c4>] dump_backtrace+0x0/0x128
[   69.014856] [<ffffffc000089200>] show_stack+0x14/0x1c
[   69.020412] [<ffffffc000251878>] dump_stack+0x94/0xb4
[   69.027005] [<ffffffbffd5e8a6c>] wlan_mlme_stop_vdev+0x74/0xf0 [umac]
[   69.031986] [<ffffffbffd461398>] ieee80211_ucfg_set_freq_internal+0x1b8/0x6b8 [umac]
[   69.038404] [<ffffffbffd4618f4>] ieee80211_ucfg_set_freq+0x5c/0xc0 [umac]
[   69.046247] [<ffffffbffd55a130>] wlan_cfg80211_start_ap+0x290/0x4e0 [umac]
[   69.051494] [<ffffffbffc12b830>] nl80211_start_ap+0x4f8/0x5e0 [cfg80211]
[   69.058178] [<ffffffc000483314>] genl_family_rcv_msg+0x254/0x2bc
[   69.065030] [<ffffffc0004833c4>] genl_rcv_msg+0x48/0x6c
[   69.071018] [<ffffffc000482530>] netlink_rcv_skb+0x5c/0xc4
[   69.075966] [<ffffffc0004830ac>] genl_rcv+0x34/0x48
[   69.081519] [<ffffffc000481f50>] netlink_unicast+0x128/0x1dc
[   69.086296] [<ffffffc000482384>] netlink_sendmsg+0x2bc/0x2dc
[   69.092202] [<ffffffc00043cd68>] sock_sendmsg+0x18/0x2c
[   69.097841] [<ffffffc00043d3bc>] ___sys_sendmsg+0x1bc/0x248
[   69.102789] [<ffffffc00043e24c>] __sys_sendmsg+0x40/0x68
[   69.108345] [<ffffffc00043e284>] SyS_sendmsg+0x10/0x20
[   69.113902] [<ffffffc000085db0>] el0_svc_naked+0x24/0x28
= 2021.1.28 周四 =
* Bug 185350 - [GWN7605_WPA3]Secure encryption mode in SSID is WPA2/WPA3-(SAE-PSK)-AES or WPA3-SAE-AES, which cannot be bridged successfully、
    * 继续调试
= 2021.1.29 周五 =
* Bug 185350 - [GWN7605_WPA3]Secure encryption mode in SSID is WPA2/WPA3-(SAE-PSK)-AES or WPA3-SAE-AES, which cannot be bridged successfully、
    * 完成
* 当11w=1时需要支持AKM=5和6
* 周会 0.5hour

= 2021.2.1 周一 =
* 当11w=1时需要支持AKM=5和6
    * 测试功能无问题后上库

* Bug 179901 - [GWN7600 mesh][HZ]Secondary RE AP could not be successfully associated with primary RE AP
    * 与测试沟通
* Bug 186754 - [GWN7660 11w][HZ] when ssid set wpa2/psk 11w required， the akm type shows 2 and 6
    * MFPR与MFPC都开启时必须使用sha256生成Pmkid
    * WpaDerivePTK ==> LEN_AES_PTK(48)
    * RT_HMAC_SHA256 生成pmkid
* 测试7660WPA3桥接能力
    * WPA2/WPA3-PSK 与WPA3-PSK 可以正常桥接
* SDN与openvswitch学习
* Bug 185682 - [GWN Manager_SSIDs]Security mode is WPA3-192 , Portal could not successfully authenticate

= 2021.2.2 周二 =
* Bug 185682 - [GWN Manager_SSIDs]Security mode is WPA3-192 , Portal could not successfully authenticate
    * hostapd初始化因加密类型不识别引起初始化失败，netlink未初始化
* 阅读openvswitch文档与操作
    * PC搭建ovs环境
* 聚餐

= 2021.2.3 周三 =
* 阅读openvswitch文档与操作
    * ovs-ofctl -OOpenFlow13 --names --no-stat dump-flows br0 | sed 's/cookie=0x5adc15c0, //'
    * ovs-ofctl -OOpenFlow13 --no-names --sort dump-flows br0 > flows1
    * ovs-ofctl -OOpenFlow13 diff-flows flows1 br0 | sed 's/cookie=0x5adc15c0 //'
    * priority=9000,in_port=p3,vlan_tci=0x0000/0x1fff actions=push_vlan:0x8100,set_field:4196->vlan_vid,goto_table:1
        * set_field:4196 ===> vlan_field = 0x1000 | vlan_id
    * ovs-appctl ofproto/trace br0 in_port=p1
    * ovs-appctl ofproto/trace br0 in_port=p1,dl_src=00:11:11:00:00:00,dl_dst=00:22:22:00:00:00 -generate
    * sudo docker exec faucet pkill -HUP -f faucet.faucet
    * ovs-appctl ofproto/trace br0 in_port=p1,dl_src=00:01:02:03:04:05,dl_dst=ff:ff:ff:ff:ff:ff,dl_type=0x806,arp_spa=10.100.0.1,arp_tpa=10.100.0.254,arp_sha=00:01:02:03:04:05,arp_tha=ff:ff:ff:ff:ff:ff,arp_op=1 -generate
    * ovs-appctl ofproto/trace br0 in_port=p1,dl_src=00:01:02:03:04:05,dl_dst=0e:00:00:00:00:01,udp,nw_src=10.100.0.1,nw_dst=10.200.0.1,nw_ttl=64 -generate
    * ovs-appctl ofproto/trace br0 in_port=p4,dl_src=00:10:20:30:40:50,dl_dst=0e:00:00:00:00:01,dl_type=0x806,arp_spa=10.200.0.1,arp_tpa=10.200.0.254,arp_sha=00:10:20:30:40:50,arp_tha=0e:00:00:00:00:01,arp_op=2 -generate
    * ovs-appctl ofproto/trace br0 in_port=p1,dl_src=00:01:02:03:04:05,dl_dst=0e:00:00:00:00:01,udp,nw_src=10.100.0.1,nw_dst=10.200.0.1,nw_ttl=64 -generate
    * ovs-appctl ofproto/trace br0 in_port=p1,dl_src=00:01:02:03:04:05,dl_dst=0e:00:00:00:00:01,tcp,nw_src=10.100.0.1,nw_dst=10.200.0.1,nw_ttl=64,tp_dst=80 -generate
    * ovs-vsctl set interface p1 options:pcap=p1.pcap

    * ovs-appctl dpctl/dump-conntrack
    * ovs-ofctl add-flow br-int table=0,in_port=1,ip,nw_dst=10.1.0.0/24,action=ct\(commit,table=1,nat\(src=10.1.0.1\)\)
    * ovs-ofctl add-flow br-int table=0,in_port=2,ip,nw_dst=10.1.0.1,actions=ct\(nat,table=1\)
    * ovs-ofctl add-flow br-int table=1,ip,nw_src=10.1.0.1,nw_dst=10.1.0.20,actions=mod_dl_src:"02:ac:10:ff:05:01",mod_dl_dst:"02:ac:10:ff:01:31",vm2
    * ovs-ofctl add-flow br-int table=1,ip,nw_dst=10.0.0.10,actions=mod_dl_src:"02:ac:10:ff:01:01",mod_dl_dst:"02:ac:10:ff:01:30",vm1

= 2020.2.4 周四 =
* rrm邻居master检查
    * 7660支持

= 2020.2.5 周五 =
* rrm邻居master检查
    * 7600支持
    * MTK7621支持
    * MTK7620支持
